<html>
<head>
<style>
body {
	min-width: 400px;
	color: #000000;
}

img.profile {
	width: 60px;
	height: 60px;
}
</style>
<script type="text/javascript" src="lib/3rdparty/jquery.js"></script>
<script type="text/javascript">

function debug(msg) {
	$("#msg")[0].innerHTML = msg;
}

function init() {

	$.ajax({
		url: "http://pick.naver.jp/api/post/list/mainboard/1/10", 
		beforeSend: function(req) {
			req.setRequestHeader("Accept", "application/json");
		},
		dataType : "json",
		success: function(data) {

				var list = data["result"]["items"];

				for( var i = 0 ; i < list.length; i++) {
					addPost(list[i]);
				}
			}
		});
}

function addPost(post) {

	var postContent = "";

	var div = document.createElement("div");

	var displayPost = extractDisplayPost(post);

	postContent = "<img src='" + post["userProfileImageUrl"] + "' alt='"+post["userNick"]+"' class='profile'  />" + displayPost["postText"];

	div.innerHTML = postContent;

	$("#posts")[0].appendChild(div);
}

function extractDisplayPost(post) {

	var isFromSource = post["sourcePost"] ? true : false;

	var postText = isFromSource ? post["sourcePost"]["postText"] : post["postText"]
	var media =  isFromSource ? post["sourcePost"]["media"]: post["media"];

	return {"postText": postText, "media": media};
}
</script>
</head>
<body onload="init()">
<pre id="msg"></pre>
<div id="posts">
</div>
</body>
</html>
